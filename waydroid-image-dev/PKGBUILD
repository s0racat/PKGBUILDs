# Maintainer: Sam L. Yes
# Contributor: farwayer <farwayer@gmail.com>
# Contributor: Danct12 <danct12@disroot.org>
# Contributor: Bart Ribbers <bribbers@disroot.org>

_lineage_ver=18.1
_build=202111291420
pkgname=waydroid-image-dev
pkgver="${_lineage_ver}_${_build}"
pkgrel=1
pkgdesc="A container-based approach to boot a full Android system on a regular Linux system (Android 11 image from blissos-dev)."
arch=('x86_64')
license=('Apache')
url='https://sourceforge.net/projects/blissos-dev/'
depends=('waydroid')
provides=('waydroid-image')
conflicts=('waydroid-image')
source=("https://sourceforge.net/projects/blissos-dev/files/waydroid/lineage/lineage-$_lineage_ver/Lineage-OS-$_lineage_ver-waydroid_x86_64-$_build-foss-sd-hd-ex_ax86-vaapi_gles-aep.zip"
"waydroid.conf"
"99-waydroid-image-dev.conf")
sha256sums=('f24a0804a5c8d40d65f772d7e0daed446974969e872ba03eb0cc49204d791665'
            'd73d5afcacd9e584e10b780f610aac4d43bd38ccbb9bf1fc9d14f344a46ffea7'
            '40dd35047a3cd7e7e4e42a2243b0dd9d72eb8782a02ab3ce6c90a0ca1198b3d2')

package() {
  install -d "$pkgdir/usr/share/waydroid-extra/images"
  mv $srcdir/{system,vendor}.img "$pkgdir/usr/share/waydroid-extra/images"
  install -Dm644 $srcdir/waydroid.conf $pkgdir/etc/gbinder.d/waydroid.conf
  install -Dm644 $srcdir/99-waydroid-image-dev.conf $pkgdir/usr/lib/sysctl.d/99-waydroid-image-dev.conf
}
